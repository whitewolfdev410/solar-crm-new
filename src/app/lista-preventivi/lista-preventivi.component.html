<!--lista preventivi home page-->
<div class="row" *ngIf="home">
    <div class="col-12">
        <div class="card card-border-c-blue shadow mb-5">
            <div class="card-header">
                <div class="d-flex justify-content-start">
                    <h3 class=""> Preventivi non aperti </h3>
                </div>
            </div>

            <div class="card-body" style="max-height:250px;overflow:auto;margin-bottom:15px;">


                <mat-list>
                    <span *ngFor="let preventivo of prev let i=index">
                        <mat-list-item>
                            <span matListItemIcon class="mat-small">
                                <mat-icon>folder</mat-icon>
                            </span>
                            <span matListItemTitle class="mat-small">
                                <a
                                    href="../vCard/VCard.php?id_dettaglio={{ preventivo.id_cliente
                        }}&nome={{preventivo.nome }}&cognome={{ preventivo.cognome
                        }}&telefono={{preventivo.telefono
                        }}&telefono_2={{preventivo.telefono2}}&email={{preventivo.email}}&indirizzo=${{preventivo.indirizzo}}&cap={{preventivo.cap}}&provincia={{preventivo.provincia}}&note={{preventivo.landing}}\"><i
                                        class="fa-solid fa-credit-card p-1"></i></a>

                                <a href="javascript:void(0)"
                                    [routerLink]="['/dettaglio-contatto',preventivo.id_cliente]">{{preventivo.cognome}}
                                    {{preventivo.nome}}</a> n° {{preventivo.numero_offerta}} del
                                {{validDateFormat(preventivo.data_offerta) |
                                date: 'dd-MMM-yyyy'}}</span>
                            <span matListItemLine class="mat-small" *ngIf="preventivo.nota!=''">Nota:
                                <b>{{preventivo.nota}}</b> </span>
                        </mat-list-item>
                        <mat-divider></mat-divider>
                    </span>
                </mat-list>

            </div>
        </div>
    </div>
    <div class="col-12">
        <div class="card card-border-c-blue shadow mb-5">
            <div class="card-header">
                <div class="d-flex justify-content-start">
                    <h3 class=""> Preventivi Caldi</h3>
                </div>
            </div>
            <div class="card-body" style="max-height:250px;overflow:auto;margin-bottom:15px;">


                <mat-list>
                    <span *ngFor="let prevent of prevhot let i=index">
                        <mat-list-item>
                            <span matListItemIcon class="mat-small">
                                <mat-icon>folder</mat-icon>
                            </span>
                            <span matListItemTitle class="mat-small">n° {{prevent.numero_offerta}} del
                                {{validDateFormat(prevent.data_offerta) | date:
                                'dd-MMM-yyyy'}}</span>
                            <span matListItemLine class="mat-small" *ngIf="prevent.nota!=''">Nota:
                                <b>{{prevent.nota}}</b> </span>
                            <span matListItemLine class="mat-small"> <a href="javascript:void(0)"
                                    [routerLink]="['/dettaglio-contatto',prevent.id_cliente]">{{prevent.cognome}}
                                    {{prevent.nome}}</a> </span>
                        </mat-list-item>
                        <mat-divider></mat-divider>
                    </span>
                </mat-list>
            </div>
        </div>
    </div>
</div>
<!-- lista preventivi dettaglio contatto -->

<div class="card card-border-c-blue shadow mb-5" *ngIf="dettaglio">
    <div class="card-header">
        <div class="d-flex justify-content-start">
            <h3 class=""> Preventivi</h3>
        </div>
    </div>
    <div class="card-body" style="max-height:350px;overflow:auto;margin-bottom:15px;">
        <mat-list>
            <span *ngFor="let preventivo of prev; let i=index">
                <mat-list-item>
                    <span matListItemIcon class="mat-small"><button mat-icon-button
                            (click)="openDialog('preventivo',preventivo.id,preventivo.id_cliente,'49486')"
                            class="btn-sm my-auto" matTooltip="Invia offerta per Email">
                            <mat-icon>email</mat-icon>
                        </button> </span>
                    <span matListItemTitle class="mat-small">Preventivo n° <b><a
                                href="https://gestionalecero.it/dettaglio_offerta.php?id_dettaglio={{preventivo.id}}">{{preventivo.numero_offerta}}</a></b>
                        del
                        <b>{{validDateFormat(preventivo.data_offerta) | date: 'dd-MMM-yyyy'}}</b></span>
                    <span matListItemLine class="mat-small">Nota: <b>{{preventivo.nota}}</b> </span>
                    <span matListItemLine class="mat-small">Numero invii <b>{{preventivo.numero_invii}}</b> || Numero
                        click
                        <b>{{preventivo.clickofferta}}</b> || Ultimo invio <b>{{preventivo.data_invio | date:
                            'dd-MMM-yyyy HH:mm:ss'}}</b> </span>
                </mat-list-item>
                <mat-divider></mat-divider>
            </span>
        </mat-list>
    </div>
    <div class="card-footer text-end">

        <a *ngIf="id_ruolo == 1 || id_ruolo == 16" mat-icon-button href="{{url_global}}/nuova-offerta/{{user}}"
            target="_blank" placement="left" matTooltip="Nuovo Preventivo DEV">
            <mat-icon>note_add</mat-icon>
        </a>

        <div class="card-footer text-end">
            <a mat-icon-button href="https://gestionalecero.it/nuova_offerta.php?id_utente={{user}}" target="_blank"
                placement="left" matTooltip="Nuovo Preventivo">
                <mat-icon>note_add</mat-icon>
            </a>
        </div>
    </div>